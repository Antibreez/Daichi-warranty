!function(){var e=document.querySelector("input[name='name']"),t=document.querySelector("input[name='password']"),n=document.querySelector(".authorization__button");if(e&&t&&n){var s=function(e){var t=e.target;t.classList.contains("js--wrong-input")&&t.classList.remove("js--wrong-input")};n.addEventListener("click",(function(){""===e.value&&e.classList.add("js--wrong-input"),""===t.value&&t.classList.add("js--wrong-input")})),e.addEventListener("input",s),t.addEventListener("input",s)}}(),function(){var e=document.querySelector(".not-used-products__button"),t=document.querySelector(".not-used-products__show"),n=document.querySelector(".not-used-products__hide"),s=document.querySelector(".not-used-products__content"),o=document.querySelector(".account-header__dropdown"),a=document.querySelector(".account-header__nav"),c=document.querySelector(".account-header__nav-button");if(e){var r=function(e){e.classList.toggle("js--shown"),e.classList.toggle("js--hidden")};e.addEventListener("click",(function(){r(t),r(n),s.classList.toggle("js--show")})),o.addEventListener("click",(function(){a.classList.contains("js--show")||a.classList.add("js--show")})),c.addEventListener("click",(function(){a.classList.contains("js--show")&&a.classList.remove("js--show")}))}}(),function(){var e=document.querySelector(".product-registration"),t=document.querySelectorAll(".product-registration__navigation-item"),n=(document.querySelector(".contacts"),document.querySelector(".contacts__phone-number")),s=document.querySelector(".contacts__code"),o=document.querySelector("input[name='phone-number']"),a=document.querySelector("input[name='phone-code']"),c=document.querySelector(".contacts__phone-form button"),r=document.querySelector(".contacts__code-form button"),i=document.querySelector(".contacts__phone-form"),d=document.querySelector(".contacts__code-form"),u=document.querySelector(".contacts__product-card .product-card__change"),l=document.querySelector(".contacts__selected-phone"),m=document.querySelector(".contacts__code-error-message"),p=document.querySelector(".contacts__code-form label"),v=document.querySelector(".contacts__selected-phone-change"),L="Указан неверный код, осталось попыток: 1",y="Вы превысили количество попыток, следующий запрос кода возможен через 10 минут",_=0;if(o){new Inputmask("+7(999)999-99-99").mask(o),new Inputmask("9999999",{placeholder:""}).mask(a);var f=function(e){e.classList.contains("hidden")&&e.classList.remove("hidden")},g=function(e){e.classList.contains("hidden")||e.classList.add("hidden")};o.addEventListener("input",(function(){var e=o.value;16===e.length&&-1===e.indexOf("_")?c.removeAttribute("disabled"):c.setAttribute("disabled","")})),u.addEventListener("click",(function(){e.classList.remove("js--contacts"),e.classList.add("js--product-data"),t[0].classList.remove("js--checked"),t[1].classList.remove("js--active"),f(n),g(s)})),i.addEventListener("submit",(function(e){e.preventDefault(),l.textContent=o.value,g(n),f(s),a.focus()})),a.addEventListener("input",(function(){m.textContent="",p.classList.contains("js--error")&&p.classList.remove("js--error"),a.classList.contains("js--wrong-input")&&a.classList.remove("js--wrong-input"),7===a.value.length?r.removeAttribute("disabled"):r.setAttribute("disabled","")})),d.addEventListener("submit",(function(n){n.preventDefault(),"0000000"!==a.value?(p.classList.contains("js--error")||p.classList.add("js--error"),a.classList.contains("js--wrong-input")||a.classList.add("js--wrong-input"),0===_&&(m.textContent=L),_>0&&(m.textContent=y,r.setAttribute("disabled","")),_++):e.classList.contains("product-registration--account")?(e.classList.add("js--registration-end"),e.classList.remove("js--contacts"),t[0].classList.add("js--checked"),t[1].classList.add("js--active")):(e.classList.add("js--personal-data"),e.classList.remove("js--contacts"))})),v.addEventListener("click",(function(){g(s),f(n),o.focus()}))}}(),function(){var e=document.querySelector("body"),t=document.querySelector("input[name='phone-number']"),n=document.querySelector(".product-registration"),s=document.querySelectorAll(".product-registration__navigation-item"),o=(document.querySelector(".product-data"),document.querySelector(".product-data form")),a=document.querySelector("label[for='serial-number-1'] button"),c=document.querySelector(".popup-warranty"),r=document.querySelector(".popup-warranty__close"),i=document.querySelector(".popup-warranty__overlay"),d=document.querySelector(".product-data__purchase-date"),u=document.querySelector(".product-data__calendar"),l=document.querySelectorAll(".product-data__serial-number"),m=document.querySelector(".product-data__submit");if(a){var p=function(){6===l[0].value.length&&6===l[1].value.length&&6===l[2].value.length&&/^[0-9.]+$/.test(d.value)?m.removeAttribute("disabled"):m.setAttribute("disabled","")},v=function(e){return Math.floor(e/10)>0?e:"0"+e},L=new Pikaday({field:u,firstDay:1,onSelect:function(){var e=new Date(L);d.value=function(e){var t=(e=new Date(e)).getDate(),n=e.getMonth()+1,s=e.getFullYear();return v(t)+"."+v(n)+"."+s}(e),p()}});new Inputmask("99.99.9999",{placeholder:"ДД.ММ.ГГГГ"}).mask(d);var y=function(e){var t=e.target;6===t.value.length?(t.classList.contains("js--wrong-input")&&t.classList.remove("js--wrong-input"),"serial-number-1"!==t.id&&"serial-number-2"!==t.id||t.nextSibling.nextSibling.focus(),"serial-number-3"===t.id&&d.focus()):t.classList.add("js--wrong-input"),p()},_=function(){c.classList.add("hidden"),e.classList.remove("popup")};a.addEventListener("click",(function(){c.classList.remove("hidden"),e.classList.add("popup")})),r.addEventListener("click",(function(){_()})),i.addEventListener("click",(function(){_()})),l.forEach((function(e){e.addEventListener("input",y)})),d.addEventListener("input",(function(){p(),console.log(d.value.length)})),o.addEventListener("submit",(function(e){e.preventDefault(),n.classList.add("js--contacts"),n.classList.remove("js--product-data"),n.classList.contains("product-registration--account")||(s[0].classList.add("js--checked"),s[1].classList.add("js--active")),t.focus()}))}}(),function(){var e=document.querySelector(".product-registration"),t=document.querySelectorAll(".product-registration__navigation-item"),n=document.querySelector(".personal-data__form"),s=document.querySelector(".personal-data input[name='surname']"),o=document.querySelector(".personal-data input[name='name']"),a=document.querySelector(".personal-data input[name='patronymic']"),c=document.querySelector(".personal-data input[name='city']"),r=document.querySelector(".personal-data input[name='email']"),i=document.querySelector(".personal-data input[type='checkbox']"),d=document.querySelector(".personal-data__agreement-wrapper label"),u=document.querySelector(".personal-data__text-wrapper"),l=document.querySelector(".personal-data__button");if(s){var m=function(){s.validity.valid&&o.validity.valid&&a.validity.valid&&c.validity.valid&&r.validity.valid&&i.checked?l.removeAttribute("disabled"):l.setAttribute("disabled","")},p=function(e){m();var t=e.target,n=t.parentNode.querySelector("p");t.validity.valid||(n.classList.contains("js--error")||n.classList.add("js--error"),t.classList.contains("js--wrong-input")||t.classList.add("js--wrong-input")),t.validity.valid&&(n.classList.contains("js--error")&&n.classList.remove("js--error"),t.classList.contains("js--wrong-input")&&t.classList.remove("js--wrong-input"))};s.addEventListener("input",p),o.addEventListener("input",p),a.addEventListener("input",p),c.addEventListener("input",p),r.addEventListener("input",p),i.addEventListener("change",(function(){m(),i.checked||(d.classList.contains("js--wrong-input")||d.classList.add("js--wrong-input"),u.classList.contains("js--error")||u.classList.add("js--error")),i.checked&&(d.classList.contains("js--wrong-input")&&d.classList.remove("js--wrong-input"),u.classList.contains("js--error")&&u.classList.remove("js--error"))})),n.addEventListener("submit",(function(n){n.preventDefault(),e.classList.remove("js--personal-data"),e.classList.add("js--registration-end"),t[1].classList.add("js--checked"),t[2].classList.add("js--active")}))}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhvcml6YXRpb24uanMiLCJhY2NvdW50LmpzIiwiY29udGFjdHMuanMiLCJwcm9kdWN0LWRhdGEuanMiLCJwZXJzb25hbC1kYXRhLmpzIl0sIm5hbWVzIjpbIm5hbWVJbnB1dCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInBhc3N3b3JkSW5wdXQiLCJzdWJtaXRCdXR0b24iLCJvbklucHV0IiwiZXZ0IiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJyZW1vdmUiLCJhZGRFdmVudExpc3RlbmVyIiwidmFsdWUiLCJhZGQiLCJvbGRQcm9kdWN0c0J1dHRvbiIsIm9sZFByb2R1Y3RzU2hvdyIsIm9sZFByb2R1Y3RzSGlkZSIsIm9sZFByb2R1Y3RzIiwiZHJvcGRvd24iLCJuYXZpZ2F0aW9uIiwiY2xvc2VOYXZCdXR0b24iLCJvbGRQcm9kdWN0c0J1dHRvblRvZ2dsZSIsIml0ZW0iLCJ0b2dnbGUiLCJwcm9kdWN0UmVnaXN0cmF0aW9uIiwicmVnaXN0cmF0aW9uSXRlbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjb250YWN0c1Bob25lIiwiY29udGFjdHNDb2RlIiwicGhvbmVJbnB1dCIsImNvZGVJbnB1dCIsInBob25lQnV0dG9uIiwiY29kZUJ1dHRvbiIsInBob25lRm9ybSIsImNvZGVGb3JtIiwicHJvZHVjdENoYW5nZUJ1dHRvbiIsInNlbGVjdGVkUGhvbmUiLCJjb2RlRXJyb3IiLCJjb2RlTGFiZWwiLCJwaG9uZUNoYW5nZUJ1dHRvbiIsIkVSUk9SX01FU1NBR0VTIiwiYXR0ZW1wdHMiLCJJbnB1dG1hc2siLCJtYXNrIiwicGxhY2Vob2xkZXIiLCJzaG93IiwiaGlkZSIsInN0ciIsImxlbmd0aCIsImluZGV4T2YiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJwcmV2ZW50RGVmYXVsdCIsInRleHRDb250ZW50IiwiZm9jdXMiLCJib2R5IiwicHJvZHVjdERhdGFGb3JtIiwid2FycmFudHlDb2RlQnV0dG9uIiwicG9wdXAiLCJwb3B1cENsb3NlIiwicG9wdXBPdmVybGF5IiwiY2FsZW5kYXJJbnB1dCIsImNhbGVuZGFyQnV0dG9uIiwic2VyaWFsTnVtYmVySW5wdXQiLCJkYXRhU3VibWl0IiwiY2hlY2tWYWxpZGl0eSIsInRlc3QiLCJnZXRDb3JyZWN0TnVtYmVyIiwibnVtIiwiTWF0aCIsImZsb29yIiwicGlja2VyIiwiUGlrYWRheSIsImZpZWxkIiwiZmlyc3REYXkiLCJvblNlbGVjdCIsImRhdGUiLCJEYXRlIiwiZGF5IiwiZ2V0RGF0ZSIsIm1vbnRoIiwiZ2V0TW9udGgiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJvblNlcmlhbE51bWJlcklucHV0IiwiaWQiLCJuZXh0U2libGluZyIsImNsb3NlUG9wdXAiLCJmb3JFYWNoIiwiZWwiLCJjb25zb2xlIiwibG9nIiwiZm9ybSIsInN1cm5hbWVJbnB1dCIsInBhdHJvbnltaWNJbnB1dCIsImNpdHlJbnB1dCIsImVtYWlsSW5wdXQiLCJjaGVja2JveCIsImNoZWNrYm94TGFiZWwiLCJhZ3JlZW1lbnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiY2hlY2tlZCIsImxhYmVsIiwicGFyZW50Tm9kZSJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDQSxJQUFBQSxFQUFBQyxTQUFBQyxjQUFBLHNCQUNBQyxFQUFBRixTQUFBQyxjQUFBLDBCQUNBRSxFQUFBSCxTQUFBQyxjQUFBLDBCQUVBLEdBQUFGLEdBQUFHLEdBQUFDLEVBQUEsQ0FJQSxJQVVBQyxFQUFBLFNBQUFDLEdBQ0EsSUFBQUMsRUFBQUQsRUFBQUMsT0FDQUEsRUFBQUMsVUFBQUMsU0FBQSxvQkFDQUYsRUFBQUMsVUFBQUUsT0FBQSxvQkFJQU4sRUFBQU8saUJBQUEsU0FqQkEsV0FDQSxLQUFBWCxFQUFBWSxPQUNBWixFQUFBUSxVQUFBSyxJQUFBLG1CQUdBLEtBQUFWLEVBQUFTLE9BQ0FULEVBQUFLLFVBQUFLLElBQUEsc0JBWUFiLEVBQUFXLGlCQUFBLFFBQUFOLEdBQ0FGLEVBQUFRLGlCQUFBLFFBQUFOLElBNUJBLEdDQUEs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dC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xuICB2YXIgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImlucHV0W25hbWU9J25hbWUnXVwiKTtcbiAgdmFyIHBhc3N3b3JkSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQnXVwiKTtcbiAgdmFyIHN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hdXRob3JpemF0aW9uX19idXR0b24nKTtcblxuICBpZiAoIW5hbWVJbnB1dCB8fCAhcGFzc3dvcmRJbnB1dCB8fCAhc3VibWl0QnV0dG9uKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIG9uU3VibWl0QnV0dG9uQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKG5hbWVJbnB1dC52YWx1ZSA9PT0gJycpIHtcbiAgICAgIG5hbWVJbnB1dC5jbGFzc0xpc3QuYWRkKCdqcy0td3JvbmctaW5wdXQnKTtcbiAgICB9XG5cbiAgICBpZiAocGFzc3dvcmRJbnB1dC52YWx1ZSA9PT0gJycpIHtcbiAgICAgIHBhc3N3b3JkSW5wdXQuY2xhc3NMaXN0LmFkZCgnanMtLXdyb25nLWlucHV0Jyk7XG4gICAgfVxuICB9XG5cbiAgdmFyIG9uSW5wdXQgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgdmFyIHRhcmdldCA9IGV2dC50YXJnZXQ7XG4gICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2pzLS13cm9uZy1pbnB1dCcpKSB7XG4gICAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnanMtLXdyb25nLWlucHV0Jyk7XG4gICAgfVxuICB9XG5cbiAgc3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25TdWJtaXRCdXR0b25DbGljayk7XG4gIG5hbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIG9uSW5wdXQpO1xuICBwYXNzd29yZElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0Jywgb25JbnB1dCk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgdmFyIG9sZFByb2R1Y3RzQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5vdC11c2VkLXByb2R1Y3RzX19idXR0b24nKTtcbiAgdmFyIG9sZFByb2R1Y3RzU2hvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ub3QtdXNlZC1wcm9kdWN0c19fc2hvdycpO1xuICB2YXIgb2xkUHJvZHVjdHNIaWRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5vdC11c2VkLXByb2R1Y3RzX19oaWRlJyk7XG4gIHZhciBvbGRQcm9kdWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ub3QtdXNlZC1wcm9kdWN0c19fY29udGVudCcpO1xuICB2YXIgZHJvcGRvd24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWNjb3VudC1oZWFkZXJfX2Ryb3Bkb3duJyk7XG4gIHZhciBuYXZpZ2F0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjY291bnQtaGVhZGVyX19uYXYnKTtcbiAgdmFyIGNsb3NlTmF2QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjY291bnQtaGVhZGVyX19uYXYtYnV0dG9uJyk7XG5cbiAgaWYgKCFvbGRQcm9kdWN0c0J1dHRvbikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBvbGRQcm9kdWN0c0J1dHRvblRvZ2dsZSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgaXRlbS5jbGFzc0xpc3QudG9nZ2xlKCdqcy0tc2hvd24nKTtcbiAgICBpdGVtLmNsYXNzTGlzdC50b2dnbGUoJ2pzLS1oaWRkZW4nKTtcbiAgfTtcblxuICB2YXIgb25PbGRQcm9kdWN0c0J1dHRvbkNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgIG9sZFByb2R1Y3RzQnV0dG9uVG9nZ2xlKG9sZFByb2R1Y3RzU2hvdyk7XG4gICAgb2xkUHJvZHVjdHNCdXR0b25Ub2dnbGUob2xkUHJvZHVjdHNIaWRlKTtcbiAgICBvbGRQcm9kdWN0cy5jbGFzc0xpc3QudG9nZ2xlKCdqcy0tc2hvdycpO1xuICB9O1xuXG4gIHZhciBvbkRyb3Bkb3duQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFuYXZpZ2F0aW9uLmNsYXNzTGlzdC5jb250YWlucygnanMtLXNob3cnKSkge1xuICAgICAgbmF2aWdhdGlvbi5jbGFzc0xpc3QuYWRkKCdqcy0tc2hvdycpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBvbk5hdkNsb3NlQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKG5hdmlnYXRpb24uY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy0tc2hvdycpKSB7XG4gICAgICBuYXZpZ2F0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ2pzLS1zaG93Jyk7XG4gICAgfVxuICB9XG5cbiAgb2xkUHJvZHVjdHNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbk9sZFByb2R1Y3RzQnV0dG9uQ2xpY2spO1xuICBkcm9wZG93bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uRHJvcGRvd25DbGljayk7XG4gIGNsb3NlTmF2QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25OYXZDbG9zZUNsaWNrKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICB2YXIgcHJvZHVjdFJlZ2lzdHJhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9kdWN0LXJlZ2lzdHJhdGlvbicpO1xuICB2YXIgcmVnaXN0cmF0aW9uSXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcm9kdWN0LXJlZ2lzdHJhdGlvbl9fbmF2aWdhdGlvbi1pdGVtJyk7XG5cbiAgdmFyIGNvbnRhY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhY3RzJyk7XG4gIHZhciBjb250YWN0c1Bob25lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhY3RzX19waG9uZS1udW1iZXInKTtcbiAgdmFyIGNvbnRhY3RzQ29kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWN0c19fY29kZScpO1xuICB2YXIgcGhvbmVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFtuYW1lPSdwaG9uZS1udW1iZXInXVwiKTtcbiAgdmFyIGNvZGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFtuYW1lPSdwaG9uZS1jb2RlJ11cIilcbiAgdmFyIHBob25lQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhY3RzX19waG9uZS1mb3JtIGJ1dHRvbicpO1xuICB2YXIgY29kZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWN0c19fY29kZS1mb3JtIGJ1dHRvbicpXG4gIHZhciBwaG9uZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFjdHNfX3Bob25lLWZvcm0nKTtcbiAgdmFyIGNvZGVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhY3RzX19jb2RlLWZvcm0nKTtcbiAgdmFyIHByb2R1Y3RDaGFuZ2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFjdHNfX3Byb2R1Y3QtY2FyZCAucHJvZHVjdC1jYXJkX19jaGFuZ2UnKTtcbiAgdmFyIHNlbGVjdGVkUGhvbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFjdHNfX3NlbGVjdGVkLXBob25lJyk7XG4gIHZhciBjb2RlRXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFjdHNfX2NvZGUtZXJyb3ItbWVzc2FnZScpO1xuICB2YXIgY29kZUxhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhY3RzX19jb2RlLWZvcm0gbGFiZWwnKTtcbiAgdmFyIHBob25lQ2hhbmdlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhY3RzX19zZWxlY3RlZC1waG9uZS1jaGFuZ2UnKTtcblxuICB2YXIgQ09SUkVDVF9DT0RFID0gJzAwMDAwMDAnO1xuICB2YXIgRVJST1JfTUVTU0FHRVMgPSB7XG4gICAgZmlyc3Q6ICfQo9C60LDQt9Cw0L0g0L3QtdCy0LXRgNC90YvQuSDQutC+0LQsINC+0YHRgtCw0LvQvtGB0Ywg0L/QvtC/0YvRgtC+0Lo6IDEnLFxuICAgIHNlY29uZDogJ9CS0Ysg0L/RgNC10LLRi9GB0LjQu9C4INC60L7Qu9C40YfQtdGB0YLQstC+INC/0L7Qv9GL0YLQvtC6LCDRgdC70LXQtNGD0Y7RidC40Lkg0LfQsNC/0YDQvtGBINC60L7QtNCwINCy0L7Qt9C80L7QttC10L0g0YfQtdGA0LXQtyAxMCDQvNC40L3Rg9GCJ1xuICB9O1xuXG4gIHZhciBhdHRlbXB0cyA9IDA7XG5cbiAgaWYgKCFwaG9uZUlucHV0KSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGltUGhvbmUgPSBuZXcgSW5wdXRtYXNrKCcrNyg5OTkpOTk5LTk5LTk5Jyk7XG4gIGltUGhvbmUubWFzayhwaG9uZUlucHV0KTtcblxuICB2YXIgaW1Db2RlID0gbmV3IElucHV0bWFzaygnOTk5OTk5OScsIHsgcGxhY2Vob2xkZXI6ICcnIH0pO1xuICBpbUNvZGUubWFzayhjb2RlSW5wdXQpO1xuXG4gIHZhciBzaG93ID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICBpZiAoaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSB7XG4gICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgaGlkZSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgaWYgKCFpdGVtLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHtcbiAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBjbGVhckVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgIGNvZGVFcnJvci50ZXh0Q29udGVudCA9ICcnO1xuXG4gICAgaWYgKGNvZGVMYWJlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2pzLS1lcnJvcicpKSB7XG4gICAgICBjb2RlTGFiZWwuY2xhc3NMaXN0LnJlbW92ZSgnanMtLWVycm9yJyk7XG4gICAgfVxuXG4gICAgaWYgKGNvZGVJbnB1dC5jbGFzc0xpc3QuY29udGFpbnMoJ2pzLS13cm9uZy1pbnB1dCcpKSB7XG4gICAgICBjb2RlSW5wdXQuY2xhc3NMaXN0LnJlbW92ZSgnanMtLXdyb25nLWlucHV0Jyk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBvblBob25lSW5wdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHN0ciA9IHBob25lSW5wdXQudmFsdWU7XG4gICAgaWYgKHN0ci5sZW5ndGggPT09IDE2ICYmIHN0ci5pbmRleE9mKCdfJykgPT09IC0xKSB7XG4gICAgICBwaG9uZUJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBob25lQnV0dG9uLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnJyk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBvblByb2R1Y3RDaGFuZ2VDbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICBwcm9kdWN0UmVnaXN0cmF0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ2pzLS1jb250YWN0cycpO1xuICAgIHByb2R1Y3RSZWdpc3RyYXRpb24uY2xhc3NMaXN0LmFkZCgnanMtLXByb2R1Y3QtZGF0YScpO1xuXG4gICAgcmVnaXN0cmF0aW9uSXRlbVswXS5jbGFzc0xpc3QucmVtb3ZlKCdqcy0tY2hlY2tlZCcpO1xuICAgIHJlZ2lzdHJhdGlvbkl0ZW1bMV0uY2xhc3NMaXN0LnJlbW92ZSgnanMtLWFjdGl2ZScpO1xuXG4gICAgc2hvdyhjb250YWN0c1Bob25lKTtcbiAgICBoaWRlKGNvbnRhY3RzQ29kZSk7XG4gIH07XG5cbiAgdmFyIG9uUGhvbmVTdWJtaXQgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgc2VsZWN0ZWRQaG9uZS50ZXh0Q29udGVudCA9IHBob25lSW5wdXQudmFsdWU7XG4gICAgaGlkZShjb250YWN0c1Bob25lKTtcbiAgICBzaG93KGNvbnRhY3RzQ29kZSk7XG5cbiAgICBjb2RlSW5wdXQuZm9jdXMoKTtcbiAgfTtcblxuICB2YXIgb25QaG9uZUNoYW5nZUNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgIGhpZGUoY29udGFjdHNDb2RlKTtcbiAgICBzaG93KGNvbnRhY3RzUGhvbmUpO1xuXG4gICAgcGhvbmVJbnB1dC5mb2N1cygpO1xuICB9XG5cbiAgdmFyIG9uQ29kZUlucHV0ID0gZnVuY3Rpb24gKCkge1xuICAgIGNsZWFyRXJyb3IoKTtcbiAgICBpZiAoY29kZUlucHV0LnZhbHVlLmxlbmd0aCA9PT0gNykge1xuICAgICAgY29kZUJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvZGVCdXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICcnKTtcbiAgICB9XG4gIH1cblxuICB2YXIgb25Db2RlU3VibWl0ID0gZnVuY3Rpb24gKGV2dCkge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmIChjb2RlSW5wdXQudmFsdWUgIT09IENPUlJFQ1RfQ09ERSkge1xuICAgICAgaWYgKCFjb2RlTGFiZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy0tZXJyb3InKSkge1xuICAgICAgICBjb2RlTGFiZWwuY2xhc3NMaXN0LmFkZCgnanMtLWVycm9yJyk7XG4gICAgICB9XG5cbiAgICAgIGlmICghY29kZUlucHV0LmNsYXNzTGlzdC5jb250YWlucygnanMtLXdyb25nLWlucHV0JykpIHtcbiAgICAgICAgY29kZUlucHV0LmNsYXNzTGlzdC5hZGQoJ2pzLS13cm9uZy1pbnB1dCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAoYXR0ZW1wdHMgPT09IDApIHtcbiAgICAgICAgY29kZUVycm9yLnRleHRDb250ZW50ID0gRVJST1JfTUVTU0FHRVMuZmlyc3Q7XG4gICAgICB9XG5cbiAgICAgIGlmIChhdHRlbXB0cyA+IDApIHtcbiAgICAgICAgY29kZUVycm9yLnRleHRDb250ZW50ID0gRVJST1JfTUVTU0FHRVMuc2Vjb25kO1xuICAgICAgICBjb2RlQnV0dG9uLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnJyk7XG4gICAgICB9XG5cbiAgICAgIGF0dGVtcHRzKys7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChwcm9kdWN0UmVnaXN0cmF0aW9uLmNsYXNzTGlzdC5jb250YWlucygncHJvZHVjdC1yZWdpc3RyYXRpb24tLWFjY291bnQnKSkge1xuICAgICAgICBwcm9kdWN0UmVnaXN0cmF0aW9uLmNsYXNzTGlzdC5hZGQoJ2pzLS1yZWdpc3RyYXRpb24tZW5kJyk7XG4gICAgICAgIHByb2R1Y3RSZWdpc3RyYXRpb24uY2xhc3NMaXN0LnJlbW92ZSgnanMtLWNvbnRhY3RzJyk7XG5cbiAgICAgICAgcmVnaXN0cmF0aW9uSXRlbVswXS5jbGFzc0xpc3QuYWRkKCdqcy0tY2hlY2tlZCcpO1xuICAgICAgICAgcmVnaXN0cmF0aW9uSXRlbVsxXS5jbGFzc0xpc3QuYWRkKCdqcy0tYWN0aXZlJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9kdWN0UmVnaXN0cmF0aW9uLmNsYXNzTGlzdC5hZGQoJ2pzLS1wZXJzb25hbC1kYXRhJyk7XG4gICAgICAgIHByb2R1Y3RSZWdpc3RyYXRpb24uY2xhc3NMaXN0LnJlbW92ZSgnanMtLWNvbnRhY3RzJyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHBob25lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBvblBob25lSW5wdXQpO1xuICBwcm9kdWN0Q2hhbmdlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25Qcm9kdWN0Q2hhbmdlQ2xpY2spO1xuICBwaG9uZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0Jywgb25QaG9uZVN1Ym1pdCk7XG4gIGNvZGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIG9uQ29kZUlucHV0KTtcbiAgY29kZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0Jywgb25Db2RlU3VibWl0KTtcbiAgcGhvbmVDaGFuZ2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvblBob25lQ2hhbmdlQ2xpY2spO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gIHZhciBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuICB2YXIgcGhvbmVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFtuYW1lPSdwaG9uZS1udW1iZXInXVwiKTtcblxuICB2YXIgcHJvZHVjdFJlZ2lzdHJhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9kdWN0LXJlZ2lzdHJhdGlvbicpO1xuICB2YXIgcmVnaXN0cmF0aW9uSXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcm9kdWN0LXJlZ2lzdHJhdGlvbl9fbmF2aWdhdGlvbi1pdGVtJyk7XG5cbiAgdmFyIHByb2R1Y3REYXRhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2R1Y3QtZGF0YScpO1xuICB2YXIgcHJvZHVjdERhdGFGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2R1Y3QtZGF0YSBmb3JtJyk7XG4gIHZhciB3YXJyYW50eUNvZGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibGFiZWxbZm9yPSdzZXJpYWwtbnVtYmVyLTEnXSBidXR0b25cIik7XG4gIHZhciBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC13YXJyYW50eScpO1xuICB2YXIgcG9wdXBDbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC13YXJyYW50eV9fY2xvc2UnKTtcbiAgdmFyIHBvcHVwT3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC13YXJyYW50eV9fb3ZlcmxheScpO1xuXG4gIHZhciBjYWxlbmRhcklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2R1Y3QtZGF0YV9fcHVyY2hhc2UtZGF0ZScpO1xuICB2YXIgY2FsZW5kYXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdC1kYXRhX19jYWxlbmRhcicpO1xuXG4gIHZhciBzZXJpYWxOdW1iZXJJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcm9kdWN0LWRhdGFfX3NlcmlhbC1udW1iZXInKTtcbiAgdmFyIGRhdGFTdWJtaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdC1kYXRhX19zdWJtaXQnKTtcblxuICBpZighd2FycmFudHlDb2RlQnV0dG9uKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGNoZWNrVmFsaWRpdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYoXG4gICAgICBzZXJpYWxOdW1iZXJJbnB1dFswXS52YWx1ZS5sZW5ndGggPT09IDZcbiAgICAgICYmIHNlcmlhbE51bWJlcklucHV0WzFdLnZhbHVlLmxlbmd0aCA9PT0gNlxuICAgICAgJiYgc2VyaWFsTnVtYmVySW5wdXRbMl0udmFsdWUubGVuZ3RoID09PSA2XG4gICAgICAmJiAoL15bMC05Ll0rJC8pLnRlc3QoY2FsZW5kYXJJbnB1dC52YWx1ZSlcbiAgICApIHtcbiAgICAgIGRhdGFTdWJtaXQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXRhU3VibWl0LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnJyk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBnZXRDb3JyZWN0TnVtYmVyID0gZnVuY3Rpb24gKG51bSkge1xuICAgIHJldHVybiBNYXRoLmZsb29yKG51bSAvIDEwKSA+IDAgPyBudW0gOiAnMCcgKyBudW07XG4gIH07XG5cbiAgdmFyIGdldERhdGUgPSBmdW5jdGlvbiAoZGF0ZSkge1xuICAgIHZhciBkYXRlID0gbmV3IERhdGUoZGF0ZSk7XG5cbiAgICB2YXIgZGF5ID0gZGF0ZS5nZXREYXRlKCk7XG4gICAgdmFyIG1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMTtcbiAgICB2YXIgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcblxuICAgIHJldHVybiBnZXRDb3JyZWN0TnVtYmVyKGRheSkgKyAnLicgKyBnZXRDb3JyZWN0TnVtYmVyKG1vbnRoKSArICcuJyArIHllYXI7XG4gIH07XG5cbiAgdmFyIHBpY2tlciA9IG5ldyBQaWthZGF5KHtcbiAgICBmaWVsZDogY2FsZW5kYXJCdXR0b24sXG4gICAgZmlyc3REYXk6IDEsXG4gICAgb25TZWxlY3Q6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShwaWNrZXIpO1xuICAgICAgY2FsZW5kYXJJbnB1dC52YWx1ZSA9IGdldERhdGUoZGF0ZSk7XG4gICAgICBjaGVja1ZhbGlkaXR5KCk7XG4gICAgfVxuICB9KTtcblxuICB2YXIgaW0gPSBuZXcgSW5wdXRtYXNrKCc5OS45OS45OTk5JywgeyAncGxhY2Vob2xkZXInOiAn0JTQlC7QnNCcLtCT0JPQk9CTJ30pO1xuICBpbS5tYXNrKGNhbGVuZGFySW5wdXQpO1xuXG4gIHZhciBvblNlcmlhbE51bWJlcklucHV0ID0gZnVuY3Rpb24gKGV2dCkge1xuICAgIHZhciB0YXJnZXQgPSBldnQudGFyZ2V0O1xuXG4gICAgaWYgKHRhcmdldC52YWx1ZS5sZW5ndGggPT09IDYpIHtcbiAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy0td3JvbmctaW5wdXQnKSkge1xuICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnanMtLXdyb25nLWlucHV0Jyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0YXJnZXQuaWQgPT09ICdzZXJpYWwtbnVtYmVyLTEnIHx8IHRhcmdldC5pZCA9PT0gJ3NlcmlhbC1udW1iZXItMicpIHtcbiAgICAgICAgdGFyZ2V0Lm5leHRTaWJsaW5nLm5leHRTaWJsaW5nLmZvY3VzKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0YXJnZXQuaWQgPT09ICdzZXJpYWwtbnVtYmVyLTMnKSB7XG4gICAgICAgIGNhbGVuZGFySW5wdXQuZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2pzLS13cm9uZy1pbnB1dCcpO1xuICAgIH1cblxuICAgIGNoZWNrVmFsaWRpdHkoKTtcbiAgfTtcblxuICB2YXIgb25DYWxlbmRhcklucHV0ID0gZnVuY3Rpb24gKCkge1xuICAgIGNoZWNrVmFsaWRpdHkoKTtcbiAgICBjb25zb2xlLmxvZyhjYWxlbmRhcklucHV0LnZhbHVlLmxlbmd0aCk7XG5cbiAgfTtcblxuICB2YXIgb3BlblBvcHVwID0gZnVuY3Rpb24gKCkge1xuICAgIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIGJvZHkuY2xhc3NMaXN0LmFkZCgncG9wdXAnKTtcbiAgfTtcblxuICB2YXIgY2xvc2VQb3B1cCA9IGZ1bmN0aW9uICgpIHtcbiAgICBwb3B1cC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwJyk7XG4gIH1cblxuICB2YXIgb25XYXJyYW50eUNvZGVCdXR0b25DbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICBvcGVuUG9wdXAoKTtcbiAgfTtcblxuICB2YXIgb25Qb3B1cENsb3NlQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgY2xvc2VQb3B1cCgpO1xuICB9O1xuXG4gIHZhciBvblBvcHVwT3ZlcmxheUNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgIGNsb3NlUG9wdXAoKTtcbiAgfTtcblxuICB2YXIgb25TdWJtaXQgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgcHJvZHVjdFJlZ2lzdHJhdGlvbi5jbGFzc0xpc3QuYWRkKCdqcy0tY29udGFjdHMnKTtcbiAgICBwcm9kdWN0UmVnaXN0cmF0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ2pzLS1wcm9kdWN0LWRhdGEnKTtcblxuICAgIGlmICghcHJvZHVjdFJlZ2lzdHJhdGlvbi5jbGFzc0xpc3QuY29udGFpbnMoJ3Byb2R1Y3QtcmVnaXN0cmF0aW9uLS1hY2NvdW50JykpIHtcbiAgICAgIHJlZ2lzdHJhdGlvbkl0ZW1bMF0uY2xhc3NMaXN0LmFkZCgnanMtLWNoZWNrZWQnKTtcbiAgICAgIHJlZ2lzdHJhdGlvbkl0ZW1bMV0uY2xhc3NMaXN0LmFkZCgnanMtLWFjdGl2ZScpO1xuICAgIH1cblxuICAgIHBob25lSW5wdXQuZm9jdXMoKTtcbiAgfTtcblxuICB3YXJyYW50eUNvZGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbldhcnJhbnR5Q29kZUJ1dHRvbkNsaWNrKTtcbiAgcG9wdXBDbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uUG9wdXBDbG9zZUNsaWNrKTtcbiAgcG9wdXBPdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25Qb3B1cE92ZXJsYXlDbGljayk7XG5cbiAgc2VyaWFsTnVtYmVySW5wdXQuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIG9uU2VyaWFsTnVtYmVySW5wdXQpO1xuICB9KTtcblxuICBjYWxlbmRhcklucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0Jywgb25DYWxlbmRhcklucHV0KTtcbiAgcHJvZHVjdERhdGFGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIG9uU3VibWl0KTtcbn0oKSk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICB2YXIgcHJvZHVjdFJlZ2lzdHJhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9kdWN0LXJlZ2lzdHJhdGlvbicpO1xuICB2YXIgcmVnaXN0cmF0aW9uSXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcm9kdWN0LXJlZ2lzdHJhdGlvbl9fbmF2aWdhdGlvbi1pdGVtJyk7XG5cbiAgdmFyIGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGVyc29uYWwtZGF0YV9fZm9ybScpO1xuICB2YXIgc3VybmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wZXJzb25hbC1kYXRhIGlucHV0W25hbWU9J3N1cm5hbWUnXVwiKTtcbiAgdmFyIG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGVyc29uYWwtZGF0YSBpbnB1dFtuYW1lPSduYW1lJ11cIik7XG4gIHZhciBwYXRyb255bWljSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBlcnNvbmFsLWRhdGEgaW5wdXRbbmFtZT0ncGF0cm9ueW1pYyddXCIpO1xuICB2YXIgY2l0eUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wZXJzb25hbC1kYXRhIGlucHV0W25hbWU9J2NpdHknXVwiKTtcbiAgdmFyIGVtYWlsSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBlcnNvbmFsLWRhdGEgaW5wdXRbbmFtZT0nZW1haWwnXVwiKTtcbiAgdmFyIGNoZWNrYm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wZXJzb25hbC1kYXRhIGlucHV0W3R5cGU9J2NoZWNrYm94J11cIik7XG4gIHZhciBjaGVja2JveExhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBlcnNvbmFsLWRhdGFfX2FncmVlbWVudC13cmFwcGVyIGxhYmVsJyk7XG4gIHZhciBhZ3JlZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBlcnNvbmFsLWRhdGFfX3RleHQtd3JhcHBlclwiKTtcbiAgdmFyIHN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wZXJzb25hbC1kYXRhX19idXR0b24nKTtcblxuICBpZiAoIXN1cm5hbWVJbnB1dCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBjaGVja1ZhbGlkaXR5ID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChcbiAgICAgIHN1cm5hbWVJbnB1dC52YWxpZGl0eS52YWxpZFxuICAgICAgJiYgbmFtZUlucHV0LnZhbGlkaXR5LnZhbGlkXG4gICAgICAmJiBwYXRyb255bWljSW5wdXQudmFsaWRpdHkudmFsaWRcbiAgICAgICYmIGNpdHlJbnB1dC52YWxpZGl0eS52YWxpZFxuICAgICAgJiYgZW1haWxJbnB1dC52YWxpZGl0eS52YWxpZFxuICAgICAgJiYgY2hlY2tib3guY2hlY2tlZFxuICAgICkge1xuICAgICAgc3VibWl0QnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3VibWl0QnV0dG9uLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnJyk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBvbklucHV0ID0gZnVuY3Rpb24gKGV2dCkge1xuICAgIGNoZWNrVmFsaWRpdHkoKTtcblxuICAgIHZhciBpdGVtID0gZXZ0LnRhcmdldDtcbiAgICB2YXIgbGFiZWwgPSBpdGVtLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcigncCcpO1xuXG4gICAgaWYgKCFpdGVtLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICBpZiAoIWxhYmVsLmNsYXNzTGlzdC5jb250YWlucygnanMtLWVycm9yJykpIHtcbiAgICAgICAgbGFiZWwuY2xhc3NMaXN0LmFkZCgnanMtLWVycm9yJyk7XG4gICAgICB9XG5cbiAgICAgIGlmICghaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoJ2pzLS13cm9uZy1pbnB1dCcpKSB7XG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCgnanMtLXdyb25nLWlucHV0Jyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGl0ZW0udmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIGlmIChsYWJlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2pzLS1lcnJvcicpKSB7XG4gICAgICAgIGxhYmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2pzLS1lcnJvcicpO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoJ2pzLS13cm9uZy1pbnB1dCcpKSB7XG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnanMtLXdyb25nLWlucHV0Jyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdmFyIG9uQ2hlY2tib3hDbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICBjaGVja1ZhbGlkaXR5KCk7XG5cbiAgICBpZiAoIWNoZWNrYm94LmNoZWNrZWQpIHtcbiAgICAgIGlmICghY2hlY2tib3hMYWJlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2pzLS13cm9uZy1pbnB1dCcpKSB7XG4gICAgICAgIGNoZWNrYm94TGFiZWwuY2xhc3NMaXN0LmFkZCgnanMtLXdyb25nLWlucHV0Jyk7XG4gICAgICB9XG5cbiAgICAgIGlmICghYWdyZWVtZW50LmNsYXNzTGlzdC5jb250YWlucygnanMtLWVycm9yJykpIHtcbiAgICAgICAgYWdyZWVtZW50LmNsYXNzTGlzdC5hZGQoJ2pzLS1lcnJvcicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjaGVja2JveC5jaGVja2VkKSB7XG4gICAgICBpZiAoY2hlY2tib3hMYWJlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2pzLS13cm9uZy1pbnB1dCcpKSB7XG4gICAgICAgIGNoZWNrYm94TGFiZWwuY2xhc3NMaXN0LnJlbW92ZSgnanMtLXdyb25nLWlucHV0Jyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChhZ3JlZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy0tZXJyb3InKSkge1xuICAgICAgICBhZ3JlZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnanMtLWVycm9yJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdmFyIG9uRm9ybVN1Ym1pdCA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIHByb2R1Y3RSZWdpc3RyYXRpb24uY2xhc3NMaXN0LnJlbW92ZSgnanMtLXBlcnNvbmFsLWRhdGEnKTtcbiAgICBwcm9kdWN0UmVnaXN0cmF0aW9uLmNsYXNzTGlzdC5hZGQoJ2pzLS1yZWdpc3RyYXRpb24tZW5kJyk7XG5cbiAgICByZWdpc3RyYXRpb25JdGVtWzFdLmNsYXNzTGlzdC5hZGQoJ2pzLS1jaGVja2VkJyk7XG4gICAgcmVnaXN0cmF0aW9uSXRlbVsyXS5jbGFzc0xpc3QuYWRkKCdqcy0tYWN0aXZlJyk7XG4gIH07XG5cbiAgc3VybmFtZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0Jywgb25JbnB1dCk7XG4gIG5hbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIG9uSW5wdXQpO1xuICBwYXRyb255bWljSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBvbklucHV0KTtcbiAgY2l0eUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0Jywgb25JbnB1dCk7XG4gIGVtYWlsSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBvbklucHV0KTtcbiAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgb25DaGVja2JveENsaWNrKTtcblxuICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIG9uRm9ybVN1Ym1pdCk7XG59KSgpO1xuIl19
